<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flores Amarillas Nocturnas</title>
  <style>
    body { margin: 0; background: #10132a; }
    h1 {
      text-align: center;
      color: #ffe082;
      font-family: 'Segoe UI', Arial, sans-serif;
      margin-top: 24px;
      margin-bottom: 0;
      font-size: 2.5em;
      letter-spacing: 2px;
      text-shadow: 1px 1px 8px #fffde7;
    }
    .canvas-container {
      width: 100vw;
      max-width: 100vw;
      height: 70vw;
      max-height: 90vh;
      min-height: 350px;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #10132a;
      box-sizing: border-box;
      padding: 0;
    }
    canvas {
      width: 100% !important;
      height: 100% !important;
      max-width: 900px;
      max-height: 600px;
      background: #10132a;
      display: block;
      touch-action: none;
    }
    @media (max-width: 800px) {
      h1 {
        font-size: 1.7em;
        margin-top: 16px;
      }
      .canvas-container {
        height: 65vw;
        min-height: 160px;
        padding: 0 2vw;
      }
    }
    @media (max-width: 600px) {
      h1 {
        font-size: 1.2em;
        margin-top: 10px;
      }
      .canvas-container {
        height: 55vw;
        min-height: 110px;
        padding: 0 1vw;
      }
    }
    @media (max-width: 400px) {
      h1 {
        font-size: 1em;
      }
      .canvas-container {
        height: 45vw;
        min-height: 80px;
        padding: 0;
      }
    }
  </style>
</head>
<body>
  <h1>para ti yiyi</h1>
  <div class="canvas-container">
    <canvas id="flores" width="900" height="600"></canvas>
  </div>
  <script>
    // --- Estrellas ---
    const canvas = document.getElementById('flores');
    const ctx = canvas.getContext('2d');

    // Función para ajustar el tamaño del canvas al contenedor
    function resizeCanvas() {
      const container = document.querySelector('.canvas-container');
      const rect = container.getBoundingClientRect();
      // Mantener proporción 3:2
      let w = rect.width;
      let h = rect.height;
      if (w / h > 1.5) w = h * 1.5;
      else h = w / 1.5;
      canvas.width = w;
      canvas.height = h;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    function getWidth() { return canvas.width; }
    function getHeight() { return canvas.height; }
    let width = getWidth();
    let height = getHeight();
    // Actualizar width y height dinámicamente en cada animación
    // Generar estrellas aleatorias
    const stars = Array.from({length: 120}, () => ({
      x: Math.random() * width,
      y: Math.random() * height * 0.7,
      r: Math.random() * 1.2 + 0.3
    }));

    // --- Cometas ---
    const comets = Array.from({length: 3}, (_, i) => ({
      x: Math.random() * width,
      y: Math.random() * height * 0.5,
      vx: 2 + Math.random() * 2,
      vy: 0.7 + Math.random() * 0.7,
      tail: 60 + Math.random() * 30,
      alpha: 0.7 + Math.random() * 0.3
    }));

    // --- Flores ---
    // Agrupar las flores en el centro inferior del canvas
  // Agrupar las flores en el centro inferior del canvas, más compactas y con leve inclinación para simular un ramo
  // Agrupar todas las flores muy cerca en la parte inferior central, formando una sola "flor compuesta"
  function getFlowers() {
    width = getWidth();
    height = getHeight();
    const baseY = height - 0.2 * height;
    const baseX = width / 2;
    const closeSpacing = width * 0.02;
    return [
      { x: baseX - 2 * closeSpacing, y: baseY, scale: 0, target: 0.38, phase: 0, angle: -0.18 },
      { x: baseX - closeSpacing, y: baseY + 0.013 * height, scale: 0, target: 0.42, phase: 1, angle: -0.09 },
      { x: baseX, y: baseY + 0.007 * height, scale: 0, target: 0.40, phase: 2, angle: 0 },
      { x: baseX + closeSpacing, y: baseY + 0.013 * height, scale: 0, target: 0.36, phase: 3, angle: 0.09 },
      { x: baseX + 2 * closeSpacing, y: baseY, scale: 0, target: 0.38, phase: 4, angle: 0.18 }
    ];
  }
  let flowers = getFlowers();

    // Dibuja estrellas
    function drawStars() {
      ctx.save();
      ctx.fillStyle = '#fff';
      stars.forEach(s => {
        ctx.globalAlpha = 0.7 + Math.sin(Date.now() * 0.001 + s.x) * 0.3;
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.r, 0, 2 * Math.PI);
        ctx.fill();
      });
      ctx.globalAlpha = 1;
      ctx.restore();
    }

    // Dibuja cometas
    function drawComets() {
      comets.forEach(c => {
        // Cola
        for (let t = 0; t < c.tail; t += 4) {
          ctx.save();
          ctx.globalAlpha = c.alpha * (1 - t / c.tail);
          ctx.strokeStyle = '#b3e5fc';
          ctx.beginPath();
          ctx.moveTo(c.x - c.vx * t, c.y - c.vy * t);
          ctx.lineTo(c.x - c.vx * (t + 4), c.y - c.vy * (t + 4));
          ctx.lineWidth = 2.5 - t / c.tail * 2;
          ctx.stroke();
          ctx.restore();
        }
        // Cabeza
        ctx.save();
        ctx.globalAlpha = c.alpha;
        ctx.beginPath();
        ctx.arc(c.x, c.y, 4, 0, 2 * Math.PI);
        ctx.fillStyle = '#fffde7';
        ctx.shadowColor = '#fffde7';
        ctx.shadowBlur = 12;
        ctx.fill();
        ctx.restore();
        // Movimiento
        c.x += c.vx;
        c.y += c.vy;
        if (c.x > width + 40 || c.y > height + 40) {
          c.x = -40;
          c.y = Math.random() * height * 0.5;
        }
      });
    }

    // Dibuja una flor amarilla con abundantes hojas
    function drawFlower(x, y, scale, phase, angle) {
      ctx.save();
      ctx.translate(x, y);
      ctx.rotate(angle || 0);
      // Tallo
      ctx.beginPath();
      ctx.moveTo(0, 0);
      ctx.bezierCurveTo(0, 60, 0, 350, 0, 500 * scale);
      ctx.strokeStyle = '#388e3c';
      ctx.lineWidth = 8 * scale;
      ctx.stroke();

      // Hojas abundantes en el tallo
      for (let i = 80; i < 500 * scale; i += 50) {
        ctx.save();
  // Alternar lados y separar la hoja del tallo
  let side = (i / 50) % 2 === 0 ? 1 : -1;
  ctx.translate(12 * side * scale, i); // Desplaza la hoja lateralmente
  ctx.rotate(side * 0.5);
  // Hoja más pequeña y detallada
  ctx.beginPath();
  ctx.ellipse(0, 0, 9 * scale, 20 * scale, Math.PI / 4, 0, 2 * Math.PI);
        ctx.fillStyle = '#43a047';
        ctx.globalAlpha = 0.8;
        ctx.fill();
        ctx.globalAlpha = 1;
        // Detalle: nervadura central
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.lineTo(0, 20 * scale);
        ctx.strokeStyle = '#2e7031';
        ctx.lineWidth = 1.2 * scale;
        ctx.stroke();
        // Detalle: nervaduras laterales
        for (let n = 1; n <= 2; n++) {
          ctx.beginPath();
          ctx.moveTo(0, 5 * n * scale);
          ctx.lineTo(4 * side * scale, (5 * n + 4) * scale);
          ctx.strokeStyle = '#388e3c';
          ctx.lineWidth = 0.8 * scale;
          ctx.stroke();
        }
        ctx.restore();
      }

      // Pétalos
      for (let i = 0; i < 8; i++) {
        ctx.save();
        const petalGrow = 1 + 0.08 * Math.sin(Date.now() * 0.002 + phase + i);
        ctx.rotate(i * Math.PI / 4);
  ctx.beginPath();
  ctx.ellipse(0, 22 * scale * petalGrow, 8 * scale * petalGrow, 22 * scale * petalGrow, 0, 0, 2 * Math.PI);
        ctx.fillStyle = '#ffeb3b';
        ctx.fill();
        ctx.strokeStyle = '#fbc02d';
        ctx.stroke();
        ctx.restore();
      }
      // Centro
      ctx.beginPath();
      ctx.arc(0, 0, 18 * scale, 0, 2 * Math.PI);
      ctx.fillStyle = '#fbc02d';
      ctx.shadowColor = '#fffde7';
      ctx.shadowBlur = 10;
      ctx.fill();
      ctx.restore();
    }

    // Animación principal
    function animate() {
      ctx.clearRect(0, 0, width, height);
      drawStars();
      drawComets();
      // Animar crecimiento de las flores
      // Recalcular posición de las flores en cada frame para responsividad
      flowers = getFlowers().map((f, i) => {
        // Mantener el crecimiento animado
        const prev = flowers[i] || { scale: 0 };
        if (prev.scale < f.target) {
          f.scale = prev.scale + 0.012;
          if (f.scale > f.target) f.scale = f.target;
        } else {
          f.scale = f.target;
        }
        return f;
      });
      flowers.forEach(f => {
        drawFlower(f.x, f.y, f.scale, f.phase, f.angle);
      });
      requestAnimationFrame(animate);
    }
    animate();
  </script>
</body>
</html>
